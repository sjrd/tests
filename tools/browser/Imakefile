OzLib      = $(OZHOME)/lib
BrowserLib = $(OzLib)/browser

LOCALMODULES = constants.oz tcl-interface.oz core.oz termObject.oz\
               atoms&strings.oz errors.oz terms.oz reflect.oz\
	       termsStore.oz browserObject.oz store.oz textWidget.oz\
	       setParameter.oz pseudoObject.oz subterms.oz undefs.oz

AUXFILES = help.txt

LIBMODULES = ${LOCALMODULES:%.oz=$(BrowserLib)/%.oz}
AUXMODULES = ${AUXFILES:%.txt=$(BrowserLib)/%.txt}

install:: $(BrowserLib) $(LIBMODULES) $(AUXMODULES) bitmaps

bitmaps: $(OzLib)/bitmaps
	$(INSTALL) -m 444 ../bitmaps/browserMIcon.xbm $(OzLib)/bitmaps
	$(INSTALL) -m 444 ../bitmaps/browserIcon.xbm  $(OzLib)/bitmaps

$(BrowserLib):
	install -m 775 -d $@

$(BrowserLib)/%.oz: %.oz
	install -m 444 '$<' '$@'

$(BrowserLib)/%.txt: %.txt
	install -m 444 '$<' '$@'

undefs:	constants.oz
	rm -f undefs.oz
	grep '^\\define' constants.oz | sed -e '1,$$s/define/undef/g' > undefs.oz

